# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Order {
  _id: ID!
  status: OrderStatus!
  partnerId: String
  adminId: String
  clientId: String!
  driverId: String!
  amount: Float!
  description: String!
  comment: String!
  delayReason: String!
  incidentDescription: CommonIncidentDescriptions
  customIncidentDescription: String
  createdAt: DateTime!
  updatedAt: DateTime!
  deletedAt: DateTime
}

"""Status of the order"""
enum OrderStatus {
  NEW
  PENDING
  ASSIGNED
  IN_TRANSIT
  DELIVERED
  FAILED_ATTEMPT
  RETURNED
  CANCELLED
  ON_HOLD
  RELAUNCHED
  DELAYED
  PARTIALLY_DELIVERED
  IN_STORAGE
  AWAITING_CONFIRMATION
}

"""Incident descriptions of the order"""
enum CommonIncidentDescriptions {
  DAMAGED_PACKAGE
  WRONG_ADDRESS
  CLIENT_UNAVAILABLE
  LOST_PACKAGE
  DELAY_DUE_TO_WEATHER
  DELAY_DUE_TO_TRAFFIC
  PACKAGE_REFUSED
  OTHER
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type History {
  _id: ID!
  orderId: String!
  event: String!
  details: String
  timestamp: DateTime!
}

type Query {
  orders: [Order!]!
  order(id: String!): Order!
  ordersByStatus(status: String!): [Order!]!
  orderHistory(orderId: String!): [History!]!
}

type Mutation {
  createOrder(createOrderInput: CreateOrderInput!): Order!
  assignOrderToDriver(orderId: String!, driverId: String!): Order!
  updateOrderStatus(orderId: String!, status: String!): Order!
  removeOrder(id: String!): Order!
  reportIncident(input: ReportIncidentInput!): Order!
  createHistory(input: CreateHistoryInput!): History!
}

input CreateOrderInput {
  status: OrderStatus! = NEW
  clientId: String!
  amount: Float!
  description: String!
  comment: String!
}

input ReportIncidentInput {
  orderId: String!
  commonIncidentType: CommonIncidentDescriptions
  customIncidentDescription: String
}

input CreateHistoryInput {
  orderId: String!
  event: String!
  details: String
}